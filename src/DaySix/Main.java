package DaySix;

import java.util.*;

public class Main {
    static class Position {
        int x, y, steps;

        public Position(int x, int y, int steps) {
            this.x = x;
            this.y = y;
            this.steps = steps;
        }
    }

    public static void main(String[] args) {
        String input = getInput();
        String[] map = input.strip().split("\n");
        List<Position> obstructions = new ArrayList<>();
        Position pos = new Position(0, 0, 0);
        for (int r = 0; r < map.length; r++) {
            for (int c = 0; c < map[r].length(); c++) {
                if (map[r].charAt(c) == '^') {
                    pos.y = r;
                    pos.x = c;
                }

                if (map[r].charAt(c) == '#') {
                    obstructions.add(new Position(c, r, 0));
                }
            }
        }
        int direction = 0;
        int steps = 0;
        while (pos.x < map[0].length() && pos.x >= 0 && pos.y < map.length && pos.y >= 0) {
            if (direction >= 360) {
                direction = 0;
            }

            pos = nextPosition(pos, obstructions, direction);
            steps = pos.steps;
            direction += 90;
        }

        System.out.println("steps: " + steps);
    }

    // wrong solution because it can take wrong obstruction
    private static Position nextPosition(Position pos, List<Position> obstructions, int direction) {
        System.out.println("direction: " + direction);
        if (direction == 0) {
            for (Position obstruction : obstructions) {
                if (obstruction.x == pos.x && pos.y > obstruction.y) {
                    return new Position(pos.x, obstruction.y + 1, pos.steps + pos.y - obstruction.y - 1);
                }
            }
        }

        if (direction == 90) {
            for (Position obstruction : obstructions) {
                if (obstruction.y == pos.y && pos.x < obstruction.x) {
                    return new Position(obstruction.x - 1, pos.y, pos.steps + obstruction.x - pos.x - 1);
                }
            }
        }

        if (direction == 180) {
            for (Position obstruction : obstructions) {
                if (obstruction.x == pos.x && pos.y < obstruction.y) {
                    return new Position(pos.x, obstruction.y - 1, pos.steps + obstruction.y - pos.y - 1);
                }
            }
        }

        if (direction == 270) {
            for (Position obstruction : obstructions) {
                if (obstruction.y == pos.y && pos.x > obstruction.x) {
                    return new Position(obstruction.x + 1, pos.y, pos.steps + pos.x - obstruction.x - 1);
                }
            }
        }

        pos.y = -1;
        pos.x = -1;
        pos.steps += -1;

        return pos;
    }

    private static String getInput() {
        return """
                ....................................#............##........#..#.#..#.........#.............#..............#.......................
                ..................##.........#....................##.....#.......#.......................................#..........#.............
                .......#...........#.........................................................................................#.#.#................
                .#..........#...............................#....................................#...#.....#...#.#....................#....#......
                ..........#..........................................#............#.........................#..#......#....#..#..........#........
                ..........................................................................#..........................................#.........#..
                .....#....#...........................#......#..........#........................#..........#.............#...........#..........#
                ................#.......................#...........#.............................#.....#..#..................................#...
                ........................................................................#..#.......................................#..............
                ........#......................#.....#.......#.............#....#.........#....#........................#.............#...........
                .............#....#.......#........#..#.......##................#.......................................#.........................
                ......#..............#.#...#...............#.........................#.....#............#..#.........#...............#............
                ..................#...#..............................................#................#.......#................#..................
                ....#...#.............#........................#....................................#......#................#......#..............
                ..........................................................................................#...#.........##........................
                .............#.#...............#.....#.#......#.............................#.......................................#.....#.......
                .................................................#................................................................#...............
                ........#.#......................#......#........#.......................................................#........................
                ....#........#......#..................................................................................#............#.............
                ...........#.........#.......#...............#........................#........................................................#.#
                ........................##..................#........................#..........................................#.............#...
                ..........#........#........#.........#..................#.....#..............................#..#..............#.................
                #..............................................................#..#............................#..........#.......................
                .................................................................#...............#...#.#.........#.#.................#...........#
                .....................................#.....................#.....................#........#....#....#.............................
                #..#................#.....#....................................##............#...............#...#..........#.....................
                .................#.....#.....................#................#...........#...................................................#...
                ..................................#........#.................#....#..................#.......................................#....
                ..#....#............................#................................................##.........................................#.
                ...............#......................................................#......##...................................................
                .........................#..................................#................##.#..#.#.................#.......#..................
                .................#......................................#...#.....................................................................
                .........#..........................................................................................#.......#.....................
                ....##..#.........#..............#..#............#............#...................................#...............................
                ......#.......................................#................................................................#..................
                ....#..................#............................#................................................................#............
                ...............................##.#..............#....#............#.........................................#.....#..............
                ........#........#....#.................................................................#.....#...................#...............
                #...........#..#.........................................#..................................................#..##.......#.....#..#
                ................#......#...........##..........................................................#....#.............................
                ..........#..........#.............................................................#..............#.................#..........#..
                #.................#....................................................................................#..#..............#........
                .....#..............#.........................#.....#...........#......................#..........................................
                .....##.....................#...............................................................#.....................................
                ...................#.................................................................................#.....................#..#...
                ...............................................^......................#...........................#...............................
                .......#...............#.........#.........#......#.......................................................................#.......
                ........#.........#..#..##.................................#.....#..............#...........#..#........#.........................
                ..............................................................................#......#.#...............#..#..#.....#....#.........
                ............#...#.......##............#....#...........................................................................#..........
                ..................................##........#.....##.......#......................................................................
                .......................#...........................................#..................................#...#.........#.............
                ............#......................................................#....#..........#...................#........................#.
                ....................................................#......................#..........................#....#......................
                ..................#.##....................................#..................................#.................#....#...#.........
                ........#.....................................................................................#...#...............................
                ....................................................#..........................................#........#..#.#.................#..
                ....#...........#..#......#.........................#.....................#............................#.....#.#..............#...
                .............................#.......#..........#..................................................................#....#.....#...
                .....#.#................#...................#...............................................#.....................................
                ....#........................................#......#.............................#...............................................
                .......#..........#........................#.....................................#..............#......#...##.....................
                .....#..#.............................##........................................................#.....#..............#.#..........
                ...........................................#......#......................................#..............#.........................
                ...................#.........#....#................#.....#.........#....................#............#..#........#...............#
                .....#.....................#......................................................................#...............................
                ...............#.......................................#...#.................#..............#.....................................
                .........................#........................................................#...............................................
                ..................................#..........................................#...........#.....................#..................
                .......................#.#............#.........................................#.................................................
                ..........................#...................#......................#......................................#.....................
                .........#.........................#..............................................................#...............................
                ..#..............................#...............#..................................###..........................................#
                .............................................#...............#.....#........................................................#..#..
                ................#..........................#.......................................#........................................##.#..
                ......##........#.....................................#............#..................#...............................#...........
                ..#..................#......................................#....#.......................#................................#.......
                ........................#...............#....#...#..........................................................................#.....
                .............#.#..........#...#....#.................##...........................................................................
                ......#....#.......................................................................#.....................................#..#.....
                .............#.......#............#...#..........#...............#..................................................#..........#..
                ..........................#...........................................................#.............#.............................
                #......................................#........#......#..........................................................................
                ................#..........................................................#......................................................
                ..................#................................................................#..........................#..........#.......#
                .......#.....#............##..............................................................#....................#.....#......#.....
                ...........................................#..........#.#............................................#............................
                .......#.......................#..........................................................#.......................................
                .................#........................#.........#...#............................................................#............
                ................................................#...................#.........#...........#...........................#...........
                ..#..............#......#..............................##............#..................#.......#.................................
                .#.#.........................................#......##.....##........#.............#..#..................##....#.#...#............
                ..#.....................#.......#....#...............#...............#...................................................#........
                .#...#...............#..................................................................#..........#....#.................#.#.....
                .#...................#...................................................................#.............#.......................#..
                .....................................#.....#..#...........#...........#..........#....................................#...........
                .................................................................................#..#.............##....#...#............#........
                ......................#....#........#......#...................#.............................................#....................
                .......................................#..........................#............................#.#..........................#.....
                .#........................##....................................#.......#...........................#..#.......................#..
                .........#.........#................................................................#.................#........#..................
                ..............#.......#.....#....................#........##.............#....#...............#.............#...........#...#.....
                .................................................................#..#........#...#...#.........#..................................
                ................#......##..........#..........#.........#....#............................................#.#.............#.......
                ...#...................................................................#.......................................#..................
                .......#..................#............#.....#................#..#....##.......#...............#..................................
                ............#............##....#...................#..........................#......................................#...#...#....
                ......#.....#..........##...............#......#...............................#......#...........................................
                .................#.......#.......................................................#............#........#...#.......#...........#..
                ......................##........#...................#.....#....................#...#....#........................#................
                .................#.....#.......#...........#.......#....................##....................................................#.#.
                ......#....................................#.........................#..................................#................#.#..#...
                ..............#...........................................................................................................#.......
                #.#......#.................................................................................#...........#...#......................
                ...........................................#.#........#....#............#.....................#...................................
                ...#.............#.....................................................................................................#..........
                ..............#..........#............#...#..............#........................................##........#.....#.......#.......
                ..................##........#.............................................#.........................................###...........
                ..........#......................#............................................................................#....#..............
                .............#........#.............#.#...............#.....#..........#.....#....#...#...........#....#..........................
                ........#...#.......#........................#.............#..........#........#.......................#..........................
                ..................................................................#...............#......#...#.......#............................
                .............#..........#...................##.............#.........#..................#.........................................
                .#.....#..#...#...............#.#.............#...........#.......................................................................
                ..............#..#.........................#..............#..#..............#.......................#.#...........................
                ............#.......................#....#................#..........#.......................#.....................#..............
                #.................#............................#...##....#.....#.....................................................#............
                .............................#........................#..................................................#....#...................
                .##...........................................#.....#....#....#.......................#...#.....#...#............#................
                ........#.............#.........#..............#........................#.....................#...#...............................
                """;
    }
}

